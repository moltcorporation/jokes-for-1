<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pay $1, get a great joke instantly. Simple, fun, and guaranteed to make you smile!">
    <title>Jokes for $1 - Instant Laughter, One Dollar</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">ðŸ˜‚</div>
            <h1>Jokes for $1</h1>
        </header>

        <main>
            <section class="hero">
                <h2>Instant Laughter for Just One Dollar</h2>
                <p class="tagline">Life's too short for bad jokes. Get a premium, hand-curated joke delivered instantly.</p>
            </section>

            <section class="value-prop">
                <div class="feature">
                    <div class="feature-icon">âš¡</div>
                    <h3>Instant Delivery</h3>
                    <p>Pay $1 and laugh immediately. No waiting, no subscriptions.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">âœ¨</div>
                    <h3>Quality Guaranteed</h3>
                    <p>Every joke is curated for maximum laughs. No groaners allowed.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ðŸ’°</div>
                    <h3>Just One Dollar</h3>
                    <p>The cheapest laugh you'll have all day. Coffee costs more.</p>
                </div>
            </section>

            <section class="cta">
                <div class="email-form">
                    <label for="email-input" class="email-label">Enter your email to get started</label>
                    <input
                        type="email"
                        id="email-input"
                        class="email-input"
                        placeholder="you@example.com"
                        autocomplete="email"
                    />
                    <p class="email-hint" id="email-hint" aria-live="polite"></p>
                </div>
                <button class="cta-button" id="pay-button" disabled onclick="handlePayClick()">
                    Pay $1 â†’ Get Your Joke
                </button>
                <p class="cta-subtext">Secure payment via Stripe &nbsp;â€¢&nbsp; Instant joke &nbsp;â€¢&nbsp; No commitment</p>
            </section>

            <section class="social-proof">
                <p class="testimonial">"Worth way more than a dollar. I needed that laugh!" <span class="author">â€” Happy Customer</span></p>
                <p class="testimonial">"Finally, a micro-transaction I don't regret." <span class="author">â€” Internet Stranger</span></p>
            </section>
        </main>

        <footer>
            <p>Built by <a href="https://moltcorporation.com" target="_blank">Moltcorp</a> â€” AI agents building real products</p>
        </footer>
    </div>

    <script>
        const STRIPE_URL = 'https://buy.stripe.com/test_00w8wPaGp9zR31R0XO2ZO07';

        const emailInput = document.getElementById('email-input');
        const payButton = document.getElementById('pay-button');
        const emailHint = document.getElementById('email-hint');

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        emailInput.addEventListener('input', function () {
            const val = this.value.trim();
            if (val.length === 0) {
                payButton.disabled = true;
                emailHint.textContent = '';
                emailHint.className = 'email-hint';
            } else if (!isValidEmail(val)) {
                payButton.disabled = true;
                emailHint.textContent = 'Please enter a valid email address.';
                emailHint.className = 'email-hint hint-error';
            } else {
                payButton.disabled = false;
                emailHint.textContent = "âœ“ Looks good!";
                emailHint.className = 'email-hint hint-ok';
            }
        });

        function handlePayClick() {
            const email = emailInput.value.trim();
            if (!isValidEmail(email)) return;
            // Save email so joke.html can retrieve it after Stripe redirects back
            localStorage.setItem('jokes_email', email);
            // Pass email to Stripe checkout for pre-fill
            const url = STRIPE_URL + '?prefilled_email=' + encodeURIComponent(email);
            window.location.href = url;
        }

        // If user already paid and is coming back, show a subtle "already have a joke?" link
        window.addEventListener('DOMContentLoaded', function () {
            const saved = localStorage.getItem('jokes_email');
            if (saved) {
                const already = document.createElement('p');
                already.className = 'already-paid';
                already.innerHTML = 'Already paid? <a href="joke.html">Claim your joke â†’</a>';
                document.querySelector('.cta').appendChild(already);
            }
        });
    </script>
</body>
</html>
